# Story 3.3: Access Sales Statistics and Commission Amounts

## Status
Approved

## Story
**As an** Influencer,
**I want** to log into a dedicated portal to see my sales statistics and commission amounts in real-time,
**so that** I can track my performance and earnings.

## Acceptance Criteria
1. As an Influencer, I want to log into a dedicated portal to see my sales statistics and commission amounts in real-time.
2. The influencer can see the number of referred sales and their total commissions, but not students' personal information.

## Tasks / Subtasks
- [ ] Implement dedicated portal for Sales Partners (AC: 1, 2)
  - [ ] Create login interface for Sales Partners
  - [ ] Implement dashboard to display sales statistics and commission amounts
  - [ ] Ensure proper access controls to prevent viewing of student personal information
  - [ ] Create unit tests for portal functionality
- [ ] Implement data aggregation for sales statistics (AC: 1, 2)
  - [ ] Create logic to aggregate sales data by Sales Partner
  - [ ] Implement commission calculation based on sales and partner rates
  - [ ] Ensure only relevant data is displayed to each partner
  - [ ] Create unit tests for data aggregation functionality
- [ ] Implement security measures for data privacy (AC: 2)
  - [ ] Ensure partners can only see their own sales statistics
  - [ ] Prevent access to student personal information
  - [ ] Implement proper authentication and authorization
  - [ ] Create unit tests for security functionality
- [ ] Create documentation for the partner portal (AC: 1)
  - [ ] Write user guide for influencers on how to access and use the portal
  - [ ] Include information on interpreting sales statistics and commission amounts

## Dev Notes
### Data Models
- Sales Partner is linked to a User for portal access
- Sales data needs to be aggregated by Sales Partner
- Commission amounts are calculated based on sales and partner commission rates
- Security model must prevent partners from accessing student personal information
- Data model follows Frappe's DocType system [Source: docs/prd/4-data-model-blueprint.md, docs/fullstack_architecture/4-data-architecture.md]

### API Specifications
- Frappe automatically exposes REST API for all DocTypes
- Special endpoints may be needed for aggregated sales data
- Authentication will be managed by Frappe's standard system [Source: docs/fullstack_architecture/5-api-specification.md]

### Component Specifications
- Implementation will require both backend data aggregation and frontend UI components
- UI will need to be designed for authenticated Sales Partner users
- May need to create templates in the templates directory and www directory for public access [Source: docs/fullstack_architecture/6-project-structure.md]

### File Locations
- Code should be created/modified in the lms application directory:
  - `apps/lms/lms/doctype/sales_partner/` for portal access logic
  - `apps/lms/lms/www/` for public portal pages
  - `apps/lms/lms/templates/` for UI components
  - Related tests should be in corresponding directories with a `test_` prefix [Source: docs/fullstack_architecture/6-project-structure.md]

### Testing Requirements
- All critical business logic must be covered by Python unit tests
- Special attention to security testing to ensure proper data isolation
- Backend code should be formatted with Black following PEP 8 standards [Source: docs/fullstack_architecture/7-coding-and-testing-standards.md]

### Technical Constraints
- Technology stack is based on Frappe v15.20.0 and ERPNext v15.20.0 [Source: docs/fullstack_architecture/3-technology-stack-tech-stack.md]
- Implementation must follow Frappe's DocType system for data modeling [Source: docs/fullstack_architecture/4-data-architecture.md]
- Security is critical - partners must not see student personal information [Source: docs/prd/3-features-epics-user-stories.md]

## Testing
### Testing Standards
- Test file location: In the same directory as the code being tested with a `test_` prefix
- Test standards: All critical business logic must be covered by Python unit tests
- Testing frameworks: Python Unit Tests integrated with Frappe
- Specific testing requirements for this story:
  - Test that partners can log into the dedicated portal
  - Test that partners can see their sales statistics and commission amounts
  - Test that partners cannot access student personal information
  - Test that data is properly aggregated by Sales Partner
  - Test security measures to ensure proper data isolation

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-07 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used


### Debug Log References


### Completion Notes List


### File List

## QA Results